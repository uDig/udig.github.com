
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Catalog &mdash; uDig 2.0.0.RC1 Developers Guide</title>
    
    <link rel="stylesheet" href="_static/udig.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0.0.RC1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="_static/udig.ico"/>
    <link rel="top" title="uDig 2.0.0.RC1 Developers Guide" href="index.html" />
    <link rel="up" title="Working with the GIS Platform" href="working_with_the_gis_platform.html" />
    <link rel="next" title="Catalog Notifications" href="catalog_notifications.html" />
    <link rel="prev" title="GIS Platform" href="gis_platform.html" /> 
  </head>
  <body>
      <div class="header">
        <div class="wrap">
            <h1 id="logo"><a href="http://udig.refractions.net">uDig</a></h1>
            <ul id="top-nav">
                <li class="first">
                  <a href="http://udig.refractions.net">uDig Home</a>
                </li>
                <li>
                   <a href="http://udig.refractions.net/download">Downloads</a>
                </li>
                <li>
                   <a href="http://udig-news.blogspot.com">Blog</a>
                </li>
            </ul>
       </div>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="gis_platform.html">GIS Platform</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="catalog_notifications.html">Catalog Notifications</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="catalog">
<h1>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline">¶</a></h1>
<p>The uDIg Catalog is used to mange and interact with spatial services and resources.</p>
<p>The style of programming used for the uDig Catalog is similar to that of the Eclipse IDE (where
concepts such as Project / IResource / IFile are defined).</p>
<p><strong>NOT IResource</strong></p>
<p>Since uDig does not depend on the Eclipse IDE (we have no need of a compile / build cycle) we
provide are making use of our own interfaces ICatalog, IService and IGeoResource covered on this
page. By making use of our own API we also have been able to address a number of concerns specific
to spatial data; almost all our data is so big, or remote, or both that latency is an issue. It is
very important to us that you know when you are making use of spatial data that make take some time
to process, or has the possibility of an I/O error.</p>
<div class="section" id="catalogplugin">
<h2>CatalogPlugin<a class="headerlink" href="#catalogplugin" title="Permalink to this headline">¶</a></h2>
<p>The CatalogPlugin provides the following services:</p>
<ul class="simple">
<li>The concept of Handles to actual Resources</li>
<li>Discovery of additional resources using Search facilities</li>
<li>Programmatic Management of spatial resources</li>
</ul>
<p>The CatalogPlugin supports several formats right out of the box and is easily extended for custom
content.</p>
<div class="figure align-center">
<img alt="" src="_images/CatalogPlugin.PNG" />
</div>
<p>You can retrieve the single instance of CatalogPlugin using getDefault():</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CatalogPlugin</span> <span class="n">activator</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">();</span>
</pre></div>
</div>
<p>You can add a listener to watch for catalog events:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">addListener</span><span class="o">(</span> <span class="n">listener</span> <span class="o">);</span>
<span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">removeListener</span><span class="o">(</span> <span class="n">listener</span> <span class="o">);</span>
</pre></div>
</div>
<p>For more information please check out the next section on <a class="reference internal" href="catalog_notifications.html"><em>Catalog Notifications</em></a>.</p>
<p>The CatalogPlugin keeps a list of known catalogs, including the local catalog and remote web
catalogs.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getCatalogs</span><span class="o">();</span>
</pre></div>
</div>
<p>Most of the time you will spend interacting with the LocalCatalog manage live connections to
services:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">IRepository</span> <span class="n">local</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocal</span><span class="o">();</span>
</pre></div>
</div>
<p>There is also a service factory used to create services to add to the local catalog:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">IServiceFactory</span> <span class="n">serviceFactory</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getServiceFactory</span><span class="o">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">IService</span><span class="o">&gt;</span> <span class="n">created</span> <span class="o">=</span> <span class="n">serviceFactory</span><span class="o">.</span><span class="na">createService</span><span class="o">(</span> <span class="n">file</span><span class="o">.</span><span class="na">toURL</span><span class="o">()</span> <span class="o">);</span>
</pre></div>
</div>
<p>There are several more examples of using the ServiceFactory below.</p>
<p>The CatalogPlugin is the &#8220;Activator&#8221; or &#8220;Plugin&#8221; class for <strong>org.locationtech.udig.catalog</strong> - as
such it extends AbstractUIPlugin for the following.</p>
<ul class="simple">
<li>getDialogSettings() - used to hold persistent state data for wizards and plug-ins</li>
<li>getImageRegistry() - images that are shared for frequently used within the plug-in</li>
<li>getPreferenceStore() - used to hold persistent user or internal settings</li>
</ul>
<p>By convention all Plugins contain a static ID field used to identify the plug-in OSGi bundle, or
Platform methods.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">Platform</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">ID</span> <span class="o">);</span>
</pre></div>
</div>
<p>The ID is also useful when reporting problems:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">IStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Status</span><span class="o">(</span><span class="n">IStatus</span><span class="o">.</span><span class="na">ERROR</span><span class="o">,</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">ID</span><span class="o">,</span> <span class="s">&quot;error message&quot;</span><span class="o">);</span>
<span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLog</span><span class="o">().</span><span class="na">log</span><span class="o">(</span> <span class="n">status</span> <span class="o">);</span>
</pre></div>
</div>
<div class="section" id="isearch">
<h3>ISearch<a class="headerlink" href="#isearch" title="Permalink to this headline">¶</a></h3>
<p>ISearch is the interface used to represent a generic &#8220;catalog&#8221; of spatial resources and services,
you can think of it as being similar to a web search engine.</p>
<p>The following ISearch methods are used when working with remote services:</p>
<ul class="simple">
<li>getInfo( IProgressMonitor ) - description of the catalog</li>
<li>find( URL, IProgressMonitor ) - retrieve a list of services (or resources) for the provided URL,
including all known alternatives.</li>
<li>search( String, Envelope, IProgressMonitor ) - used to query the catalog using a text pattern and
bounding box</li>
</ul>
<p>Please keep in mind that the catalog tracks a great deal of information about your services and
resources; the reason find returns a list (rather than just a single entry) is the same information
may be available from a number of sources. Having a range of alternatives available is useful in a
world where external servers are sometimes down for maintenance.</p>
<p>The CatalogPlugin keeps track of all the catalogs (local and remote) that can be used to find
spatial content.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">IResolve</span><span class="o">&gt;</span> <span class="n">found</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">IResolve</span><span class="o">&gt;();</span>
<span class="k">for</span><span class="o">(</span> <span class="n">ISearch</span> <span class="n">search</span> <span class="o">:</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getCatalogs</span><span class="o">()</span> <span class="o">){</span>
    <span class="k">try</span> <span class="o">{</span>
       <span class="n">found</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span> <span class="n">search</span><span class="o">.</span><span class="na">search</span><span class="o">(</span> <span class="n">pattern</span><span class="o">,</span> <span class="n">bbox</span><span class="o">,</span> <span class="n">process</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span> <span class="n">IOException</span> <span class="n">problem</span> <span class="o">){</span>
        <span class="n">catalog</span><span class="o">.</span><span class="na">getLog</span><span class="o">(</span>
            <span class="k">new</span> <span class="n">Status</span><span class="o">(</span> <span class="n">IStatus</span><span class="o">.</span><span class="na">WARNING</span><span class="o">,</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">ID</span><span class="o">,</span> <span class="n">IStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">,</span> <span class="s">&quot;Failed to search with:&quot;</span><span class="o">+</span><span class="n">pattern</span><span class="o">,</span> <span class="n">t</span><span class="o">)</span>
        <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The above example makes use of CatalogPlugin, any problems are reported using the CatalogPlugin ID
to the logging system. We will cover some of the other uses of ICatalog below.</p>
<p>Please note that some of these instances may be instances of <strong>IRepository</strong> which allows you to
register your own spatial information (using the add(IService) and remove(IService) methods).</p>
</div>
<div class="section" id="local-catalog">
<h3>Local Catalog<a class="headerlink" href="#local-catalog" title="Permalink to this headline">¶</a></h3>
<p>The local catalog (implemented by the <strong>CatalogImpl</strong> class) is responsible for managing a list of
all the services known to the uDig application. The local catalog is also responsible for tracking
which Services are in use and tracking any life cycle changes (some services such as Databases are
expensive to connect to and care must be taken to clean up after their use).</p>
<div class="figure align-center">
<img alt="" src="_images/ICatalog.PNG" />
</div>
<p>The following IRepository methods are used when working with a local (or remote) repository.</p>
<ul class="simple">
<li>add( IService ) - add a service to the catalog; the service as registered is returned</li>
<li>acquire( Map, ProgressMonitor ) - connect to an IService, will create and add a service if needed</li>
<li>acquire( URL, ProgressMonitor ) - connect to an IService, will create and add the service if
needed</li>
<li>remove( IService ) - used to communicate when a service is removed (such as a file being deleted
from disk)</li>
<li>replace( URL, IService ) - used to communicate when a service changes location (such as a file
moving on disk)</li>
</ul>
<p>The following ICatalog methods are used when working with a local catalog</p>
<ul class="simple">
<li>constructServies( URL, ProgresMonitor ) - list of services to consider when adding</li>
<li>constructService( Map, ProgressMonitor ) - list of services to consider when adding</li>
<li>checkMembers( List ) - short list services that are already in the catalog (and thus do not need
to be disposed)</li>
<li>checkNonMembers( List ) - short list of services that are <strong>not</strong> in the catalog that require
handling (either by adding them to the catalog or by calling dispose)</li>
<li>createTemporaryResource( Object ) - used to create a temporary resources, usually by using a
FeatureType</li>
<li>getTemporaryDescriptorClasses() - list of classes for which a temporary resource can be created</li>
</ul>
<p>The following ICatalog methods are safe to call from a user interface (ie are non blocking):</p>
<ul class="simple">
<li>getById( Class, URL, ProgressMonitor ) - used to look up an exact match</li>
<li>addCatalogListener( IResolveChangeListener ) - watch the catalog for changes</li>
<li>removeCatalogListener( IResolveChangeListener ) - stop watching the catalog for changes</li>
</ul>
<p>The CatalogPlugin is mostly used to access a single Local Catalog used to manage live connections to
your databases, external services and local files. The local catalog is used to track all &#8220;active&#8221;
data connections; even if you find information in a remote catalog, it will be added to the local
catalog as you start to use it.</p>
<p>To find an existing service in the catalog:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">IRepository</span> <span class="n">local</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocalCatalog</span><span class="o">();</span>
<span class="n">IService</span> <span class="n">shapefile</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="na">getById</span><span class="o">(</span> <span class="n">IService</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">url</span><span class="o">,</span> <span class="n">progressmonitor</span> <span class="o">);</span>
</pre></div>
</div>
<p>To find an existing georesource in the catalog:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ICatalog</span> <span class="n">local</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocalCatalog</span><span class="o">();</span>
<span class="n">IGeoResource</span> <span class="n">shapefile</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="na">getById</span><span class="o">(</span> <span class="n">IGeoResource</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">url</span><span class="o">,</span> <span class="n">progressmonitor</span> <span class="o">);</span>
</pre></div>
</div>
<p>To add a service to the catalog we need to use the ServiceFactory to create the IService; and then
ICatalog.add( service ) to place each service into the catalog.</p>
<p>To use ServiceFactory to connect to a service based on a simple URL.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span> <span class="s">&quot;C:\data\cities.shp&quot;</span> <span class="o">);</span>
<span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">toURL</span><span class="o">();</span>

<span class="n">IServiceFactory</span> <span class="n">serviceFactory</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getServiceFactory</span><span class="o">();</span>
<span class="k">for</span><span class="o">(</span> <span class="n">IService</span> <span class="n">service</span> <span class="o">:</span> <span class="n">serviceFactory</span><span class="o">.</span><span class="na">createService</span><span class="o">(</span> <span class="n">url</span> <span class="o">)</span> <span class="o">){</span>
     <span class="k">try</span> <span class="o">{</span>
         <span class="c1">// many different providers may think they can connect to this URL (example WFS, WMS, ...)</span>
         <span class="c1">// but we should try connecting to be sure ...</span>
         <span class="n">IServiceInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getInfo</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>
         <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocalCatalog</span><span class="o">().</span><span class="na">add</span><span class="o">(</span> <span class="n">service</span> <span class="o">);</span>
     <span class="o">}</span>
     <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">couldNotConnect</span> <span class="o">){</span>
     <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// The service(s) associated with the provided URL are now in the local catalog.</span>
</pre></div>
</div>
<p>You can be a little more efficient using the <strong>acquire</strong> method (the acquire method checks using
getById and only creates the service if needed):</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span> <span class="s">&quot;C:\data\cities.shp&quot;</span> <span class="o">);</span>
<span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">toURL</span><span class="o">();</span>

<span class="n">IRepository</span> <span class="n">local</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocal</span><span class="o">();</span>
<span class="n">IService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="na">acquire</span><span class="o">(</span> <span class="n">url</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
</pre></div>
</div>
<p>You can also use connection parameters to be a bit more specific about servic:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;();</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;ur&quot;</span><span class="o">,</span> <span class="n">url</span> <span class="o">);</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;create spatial index&quot;</span><span class="o">,</span> <span class="n">Boolean</span><span class="o">.</span><span class="na">true</span> <span class="o">);</span>

<span class="n">IServiceFactory</span> <span class="n">serviceFactory</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getServiceFactory</span><span class="o">();</span>
<span class="k">for</span><span class="o">(</span> <span class="n">IService</span> <span class="n">service</span> <span class="o">:</span> <span class="n">serviceFactory</span><span class="o">.</span><span class="na">createService</span><span class="o">(</span> <span class="n">params</span> <span class="o">)</span> <span class="o">){</span>
     <span class="k">try</span> <span class="o">{</span>
         <span class="n">IServiceInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getInfo</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>  <span class="c1">// try connecting to make sure the service works</span>
         <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocalCatalog</span><span class="o">().</span><span class="na">add</span><span class="o">(</span> <span class="n">service</span> <span class="o">);</span>
     <span class="o">}</span>
     <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">couldNotConnect</span> <span class="o">){</span>
     <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To to connect to a more interesting service such as PostGIS.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;();</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;dbtype&quot;</span><span class="o">,</span> <span class="s">&quot;postgis&quot;</span><span class="o">);</span>           <span class="c1">// must be &quot;postgis&quot;</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;host&quot;</span><span class="o">,</span> <span class="s">&quot;www.refractions.net&quot;</span><span class="o">);</span> <span class="c1">// the name or ip address of the machine running PostGIS</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;port&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="mi">5432</span><span class="o">));</span>     <span class="c1">// the port that PostGIS is running on (generally 5432)</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;database&quot;</span><span class="o">,</span> <span class="s">&quot;demo-bc&quot;</span><span class="o">);</span>         <span class="c1">// the name of the database to connect to.</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">,</span> <span class="s">&quot;demo&quot;</span><span class="o">);</span>                <span class="c1">// the user to connect with</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;passwd&quot;</span><span class="o">,</span> <span class="s">&quot;demo&quot;</span><span class="o">);</span>

<span class="n">IRepository</span> <span class="n">local</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocal</span><span class="o">();</span>
<span class="n">IService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="na">acquire</span><span class="o">(</span> <span class="n">params</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
</pre></div>
</div>
<p>Or a Web Feature Server:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">&quot;http://www2.dmsolutions.ca/cgi-bin/mswfs_gmap?Version=1.0.0&amp;Request=GetCapabilities&amp;Service=wfs&quot;</span><span class="o">);</span>

<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;();</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="n">WFSDataStoreFactory</span><span class="o">.</span><span class="na">URL</span><span class="o">.</span><span class="na">key</span><span class="o">,</span> <span class="n">url</span> <span class="o">);</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="n">WFSDataStoreFactory</span><span class="o">.</span><span class="na">LENIENT</span><span class="o">.</span><span class="na">key</span><span class="o">,</span> <span class="kc">true</span> <span class="o">);</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="n">WFSDataStoreFactory</span><span class="o">.</span><span class="na">TRY_GZIP</span><span class="o">.</span><span class="na">key</span><span class="o">,</span> <span class="kc">true</span> <span class="o">);</span>

<span class="n">IRepository</span> <span class="n">local</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getLocal</span><span class="o">();</span>
<span class="n">IService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="na">acquire</span><span class="o">(</span> <span class="n">params</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
</pre></div>
</div>
<p>To determine the connection parameters for many common servers review the <a class="reference external" href="http://docs.codehaus.org/display/GEOTDOC/Home">GeoTools User
Guide</a>.</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.codehaus.org/display/GEOTDOC/ArcSDE+Plugin">http://docs.codehaus.org/display/GEOTDOC/ArcSDE+Plugin</a></li>
<li><a class="reference external" href="http://docs.codehaus.org/display/GEOTDOC/Shapefile+Plugin">http://docs.codehaus.org/display/GEOTDOC/Shapefile+Plugin</a></li>
<li><a class="reference external" href="http://docs.codehaus.org/display/GEOTDOC/WFS+Plugin">http://docs.codehaus.org/display/GEOTDOC/WFS+Plugin</a></li>
<li><a class="reference external" href="http://docs.codehaus.org/display/GEOTDOC/DB2+Plugin">http://docs.codehaus.org/display/GEOTDOC/DB2+Plugin</a></li>
<li><a class="reference external" href="http://docs.codehaus.org/display/GEOTDOC/PostGIS+Plugin">http://docs.codehaus.org/display/GEOTDOC/PostGIS+Plugin</a></li>
</ul>
</div>
<div class="section" id="iservice">
<h3>IService<a class="headerlink" href="#iservice" title="Permalink to this headline">¶</a></h3>
<p>The CatalogPlugin uses the interface IService to model a local or remote service.</p>
<p>Here are some examples to get us started:</p>
<ul class="simple">
<li>A remote Database</li>
<li>A local File on disk</li>
<li>A Web Feature Server</li>
<li>An &#8220;internal&#8221; service such as the MapGraphics included with uDig</li>
</ul>
<p>The identifier of a service is available - so you can find the service again at another time.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// recommended!</span>
<span class="n">ID</span> <span class="n">id</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getID</span><span class="o">();</span>

<span class="c1">// slow!</span>
<span class="n">URL</span> <span class="n">identifier</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getIdentifier</span><span class="o">();</span>
</pre></div>
</div>
<p>The id is like a quick version of URL (not subject to the usual delays during hashcode and equals).</p>
<p>You can grab a copy of the service title:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">title</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getTitle</span><span class="o">()</span>
</pre></div>
</div>
<p>This is useful when listing the service in a user interface (as it will make use of a cached copy of
the service title and not have to connect).</p>
<p>The connection parameters are available; you can store these parameters if you would like to connect
to the service again at a later time.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Serializable</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getConnectionParams</span><span class="o">()</span>
</pre></div>
</div>
<p>For a Map the connection parameters are stored (so as a Map loads we will ensure each required
service is available in the local catalog). The catalog will also store these connection parameters
between runs so it can connect to the service again.</p>
<p>You can figure out which catalog the service belongs to:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ICatalog</span> <span class="n">catalog</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">parent</span><span class="o">(</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
</pre></div>
</div>
<p>This method actually needs to connect to the service so a ProgressMonitor is used (allowing the user
to cancel).</p>
<p>To retrieve information about a service including its title, description and icon you can ask for
the ServiceInfo object:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">IServiceInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getInfo</span><span class="o">(</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">());</span>

<span class="n">String</span> <span class="n">title</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="na">getTitle</span><span class="o">();</span>
<span class="n">String</span> <span class="n">description</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="na">getDescription</span><span class="o">();</span>
<span class="kt">double</span> <span class="n">metric</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="na">getMetric</span><span class="o">();</span>
</pre></div>
</div>
<p>Grabbing a IServiceInfo is the best way to check if you can connect to a service. You will find that
the <strong>IService.getMetric()</strong> provides a good measurement of how well the service will work. It is used to
indicate if the service has all the information it needs to function smoothly. If some information
is missing, such as a coordinate reference system or index, some prep may be required.</p>
<p>You can check if a service is connected:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Status</span> <span class="n">status</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getStatus</span><span class="o">();</span>
</pre></div>
</div>
<p>A service contains children.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">for</span><span class="o">(</span> <span class="n">IResolve</span> <span class="n">child</span> <span class="o">:</span> <span class="n">service</span><span class="o">.</span><span class="na">members</span><span class="o">(</span><span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">())){</span>
    <span class="c1">//work with child</span>
<span class="o">}</span>
</pre></div>
</div>
<p>These children are often IGeoResources representing spatial data; but they may also be folders or
processes depending on the service.</p>
<p>If you are only interested in spatial data there is a specific method that will list only the
GeoResources with useful data.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">for</span><span class="o">(</span> <span class="n">IGeoResource</span> <span class="n">georesource</span> <span class="o">:</span> <span class="n">service</span><span class="o">.</span><span class="na">resources</span><span class="o">(</span><span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">())</span> <span class="o">){</span>
    <span class="c1">// work with resource</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="service-specific-examples">
<h4>Service Specific Examples<a class="headerlink" href="#service-specific-examples" title="Permalink to this headline">¶</a></h4>
<p>To access a shapefile:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span> <span class="n">service</span><span class="o">.</span><span class="na">canResolve</span><span class="o">(</span> <span class="n">ShapefileDataStore</span><span class="o">.</span><span class="na">class</span> <span class="o">)){</span>
     <span class="n">ShapefileDataStore</span> <span class="n">shapefile</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span> <span class="n">ShapefileDataStore</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To access a WebMapServer:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span> <span class="n">service</span><span class="o">.</span><span class="na">canResolve</span><span class="o">(</span> <span class="n">WebMapServer</span><span class="o">.</span><span class="na">class</span> <span class="o">)){</span>
    <span class="n">WebMapServer</span> <span class="n">wms</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span> <span class="n">WebMapServer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To access PostGIS data store:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span> <span class="n">service</span><span class="o">.</span><span class="na">canResolve</span><span class="o">(</span> <span class="n">PostgisDataStore</span><span class="o">.</span><span class="na">class</span> <span class="o">)){</span>
     <span class="n">PostgisDataStore</span> <span class="n">database</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span> <span class="n">PostgisDataStore</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
     <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To work with PostGIS jdbc connection:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span> <span class="n">service</span><span class="o">.</span><span class="na">canResolve</span><span class="o">(</span> <span class="n">Connection</span><span class="o">.</span><span class="na">class</span> <span class="o">)){</span>
     <span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span> <span class="n">Connection</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
     <span class="k">try</span> <span class="o">{</span>
        <span class="o">...</span> <span class="n">issue</span> <span class="n">jdbc</span> <span class="n">commands</span><span class="o">...</span>
     <span class="o">}</span>
     <span class="k">finally</span> <span class="o">{</span>

        <span class="n">connection</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
     <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To access a WebMapServer:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span> <span class="n">service</span><span class="o">.</span><span class="na">canResolve</span><span class="o">(</span> <span class="n">WebMapServer</span><span class="o">.</span><span class="na">class</span> <span class="o">)){</span>
    <span class="n">WebMapServer</span> <span class="n">wms</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span> <span class="n">WebMapServer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">NullProgressMonitor</span><span class="o">()</span> <span class="o">);</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="igeoresource">
<h3>IGeoResource<a class="headerlink" href="#igeoresource" title="Permalink to this headline">¶</a></h3>
<p>One of the most useful things stored in a catalog is actual spatial data. The IGeoResource interface
represents real information, the kind you can display on screen or perform analysis on.</p>
<p>Here are a few examples to get us started with:</p>
<ul class="simple">
<li>A Table or View in a database</li>
<li>A FeatureCollection made available through a Web Feature Server (WFS)</li>
<li>A Web Map Server (WMS) Layer</li>
<li>The contents of a shapefile</li>
<li>A GridCoverage contained in an ArcGrid file</li>
</ul>
<p>The <strong>IGeoResource</strong> implementation does not place any restrictions on the interface used to
interact with the external resource. That said here are our top contenders for most popular
interface:</p>
<p>From GeoTools:</p>
<ul class="simple">
<li><strong>org.geotools.data.FeatureSource</strong> used to represent Feature information available in a File,
Database or Web Feature Server</li>
<li><strong>org.geotools.data.FeatureStore</strong> used to represent Feature information that allows
modification.</li>
<li><strong>org.geotools.data.ows.Layer</strong> represents a externalized rendering service advertised by a WMS</li>
<li><strong>org.geotools.coverage.io.AbstractGridCoverageReader</strong> represents raster information such as
GeoTIFF or ArcGRID content</li>
</ul>
<p>From Java:</p>
<ul class="simple">
<li><strong>java.sql.Connection</strong> a JDBC connection used to directly communicate with a database</li>
</ul>
<p>Please see the Advanced section for details on making your own content available: CAD file formats,
feature content from other toolkits, and dynamically generated content are all exciting
possibilities.</p>
</div>
<div class="section" id="igeoresource-api-overview">
<h3>IGeoResource API Overview<a class="headerlink" href="#igeoresource-api-overview" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>getInfo( IProgressMonitor ) access to a GeoResourceInfo describing this resource</li>
<li>service( IPorgressMonitor ) the service providing this resource</li>
<li>getIdentifier() identifier used to locate the resource in the catalog</li>
<li>dispose( IProgressMonitor )</li>
</ul>
<p>IGeoResource instances can formed into a tree:</p>
<ul class="simple">
<li>members( IProgressMonitor ) - used to treat IGeoResource like a folder that contains more content</li>
<li>parent( IProgressMonitor ) - the parent containing this IGeoResource</li>
</ul>
</div>
<div class="section" id="use-of-igeoresourceinfo">
<h3>Use of IGeoResourceInfo<a class="headerlink" href="#use-of-igeoresourceinfo" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="iresolve">
<h3>IResolve<a class="headerlink" href="#iresolve" title="Permalink to this headline">¶</a></h3>
<p>CatalogPlugin uses the model of a &#8220;handle&#8221; to allow access to spatial resources.</p>
<p>The concept of a resource handle is represented as the IResolve class:</p>
<ul class="simple">
<li>acts as a <strong>Proxy</strong> for remote content, you can ask a few basic questions (say askign for the
bounds) without having to connect to the real remote service</li>
<li>acts as an &#8220;Adapter&#8221; for interacting with data, you can turn your IResolve into the object you
really want, behind the scenes the catalog will make the connection and return you the class used
to interact with data.</li>
<li>acts as an &#8220;Extensible Interface&#8221;, you can make up your own data access APIs and teach the
catalog how to make use of them</li>
</ul>
<p>Here are the core responsibilities of IResolve interface:</p>
<ul class="simple">
<li>IResolve.getIdentifier() is a unique URL used to identify this resource in the catalog</li>
<li>IResolve.canResolve( Class type ) is a non blocking check to see if a <strong>type</strong> of resource is
available for the handle</li>
<li>IResolve.resolve( Class type, IProgressMonitor monitor ) will acquire the requested resource</li>
</ul>
<p>IResolve handles can form a tree using the following methods:</p>
<ul class="simple">
<li>members( IResolve parent, IProgressMonitor )</li>
<li>parent( IProgressMonitor )</li>
</ul>
<p>Finally, just because a handle exists does not mean the real resource resources exists or is
working. A service may be down, or a shapefile may not be created yet.</p>
<p>Here is how to check on the status of a IResolve:</p>
<ul class="simple">
<li>IResolve.getStatus(), one of CONNECTED, NOTCONNECTED or BROKEN</li>
</ul>
<p>Note: Methods that are blocking make use of a IProgressMonitor, and throw an IOException in the
event of a problem. This allows for both feedback during the operation, and strongly indicates to
calling code that blocking input/output will occur.</p>
<p>Let&#8217;s quickly work with an example (to make this real)</p>
<p>Use of canResolve and resolve methods</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">count</span> <span class="nf">shapes</span><span class="o">(</span> <span class="n">File</span> <span class="n">shapefile</span> <span class="o">){</span>
    <span class="n">CatalogPlugin</span> <span class="n">catalog</span> <span class="o">=</span> <span class="n">CatalogPlugin</span><span class="o">.</span><span class="na">getDefault</span><span class="o">();</span>
    <span class="n">IServiceFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="na">getServiceFactory</span><span class="o">();</span>
    <span class="k">for</span><span class="o">(</span> <span class="n">IResolve</span> <span class="n">resolve</span> <span class="o">:</span> <span class="n">factory</span><span class="o">.</span><span class="na">acquire</span><span class="o">(</span> <span class="n">shapefile</span><span class="o">.</span><span class="na">toUrl</span><span class="o">()</span> <span class="o">)</span> <span class="o">){</span>
       <span class="k">if</span><span class="o">(</span> <span class="n">resolve</span><span class="o">.</span><span class="na">canResolve</span><span class="o">(</span> <span class="n">DataStore</span><span class="o">.</span><span class="na">class</span> <span class="o">)</span> <span class="o">){</span>
           <span class="n">DataStore</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">resolve</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span> <span class="n">DataStore</span><span class="o">.</span><span class="na">class</span> <span class="o">);</span>
           <span class="n">String</span> <span class="n">typeName</span> <span class="o">=</span> <span class="n">shape</span><span class="o">.</span><span class="na">getTypeNames</span><span class="o">()[</span><span class="mi">0</span><span class="o">];</span>
           <span class="k">return</span> <span class="n">shape</span><span class="o">.</span><span class="na">getFeatureSource</span><span class="o">(</span> <span class="n">typeName</span> <span class="o">).</span><span class="na">count</span><span class="o">();</span>
       <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Comparison with IResource</strong></p>
<p>The IResolve interface follows the same design as the normal Eclipse IResource class.</p>
<p>IResolve offers the following advantages over normal Eclipse IResource:</p>
<ul class="last simple">
<li>IResolve explicitly represents a handle for a remote resource</li>
<li>IResolve blocking behavior is explicit at the API level, anything that takes an IProgressMonitor
or throws an IOException is blocking</li>
<li>IResolve is available for RCP applications, normal IResource is part of the Eclipse IDE and
cannot be used in a RCP application</li>
<li>IResolve uses Java 5 enums, type narrowing and Templates for a simplified API</li>
</ul>
</div>
</div>
<div class="section" id="extending-catalog-plugin-advanced">
<h3>Extending Catalog Plugin (Advanced)<a class="headerlink" href="#extending-catalog-plugin-advanced" title="Permalink to this headline">¶</a></h3>
<p>To extend catalog for additional formats you will need to make an implementation of IService,
IGeoResource and a WizardPage for your new content.</p>
<ul class="simple">
<li>ServiceExtention: allow the catalog to work with new kinds of Services</li>
<li>ICatalog: teach the CatalogPlugin about new kinds of remote catalogs</li>
<li>temporaryResource: create new temporary resources</li>
<li>resolvers: teach the existing IResolve Implementations (like ShpGeoResource) about your
application needs</li>
<li>friendly: build up assocations between services that are designed to work together</li>
</ul>
<p>We are going to launch right into technical details here (this is the advanced section). If you
require additional background information please consider the following references:</p>
<ul class="simple">
<li>Contributing to Eclipse (nice explanation of IResource, and IAdaptable)</li>
<li><a class="reference internal" href="eclipse_house_rules.html"><em>Eclipse House Rules</em></a></li>
</ul>
<p>Common mistakes:</p>
<ul class="simple">
<li>If you are used to making your own Eclipse plugins you may accidently depend on IResource, it
will not be available at runtime since it is part of the Eclipse IDE.</li>
<li><a class="reference internal" href="eclipse_house_rules.html"><em>Eclipse House Rules</em></a>: You may only depend on public API packages
(example org.locationtech.udig.catalog). This is less of a problem since we are able to properly
restrict packages in Eclipse 3.3.</li>
</ul>
</div>
<div class="section" id="resolvemanager">
<h3>ResolveManager<a class="headerlink" href="#resolvemanager" title="Permalink to this headline">¶</a></h3>
<p>Just because the core uDig team knows how to do a few tricks with Shapefiles, and turn them into a
FeatureSource does not mean you are left out of the game. You can teach the uDig catalog system new
tricks, making uDig classes aware of your applications needs at runtime.</p>
<div class="figure align-center">
<img alt="" src="_images/resolvemanager.png" />
</div>
<p>The ResolutionManager processes an extention point binding IResolve to new classes, you can use this
facility to integrate your own functionality with the uDig application.</p>
</div>
<div class="section" id="eclipse-ide-integration">
<h3>Eclipse IDE Integration<a class="headerlink" href="#eclipse-ide-integration" title="Permalink to this headline">¶</a></h3>
<p>When making your own instance of IResolve you can also implement IAdaptable (we ensured that no
method names would conflict). Implementing IAdaptable, and providing an adapter for IResource allows
for seamless integration with the Eclipse IDE.</p>
<p>This is out of scope for our current development effort - however the implementation is straight
forward and would allow integration of the GISPlatform with the wider Eclipse community. The Eclipse
workbench already checks for the classes supporting IAdaptable, and will automatically integrate any
class that responds to isAdaptable( IResource.class ).</p>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="gis_platform.html">GIS Platform</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="catalog_notifications.html">Catalog Notifications</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2013, Refractions Research and others.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>